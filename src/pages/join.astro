---
import PageLayout from '../layouts/PageLayout.astro';
import ObfuscatedEmail from '../components/astro/ObfuscatedEmail.astro';
import { getSiteConfig, isPersonalMode } from '../lib/config';

const config = getSiteConfig();
const personal = isPersonalMode();
---

<PageLayout
  title={personal ? 'Prospective Students' : 'Join Us'}
  description={personal
    ? 'Interested in working with me? See open positions and opportunities.'
    : 'Open positions and opportunities to join our research lab.'}
>
  <h1 class="mb-2 font-serif text-2xl font-normal text-surface-900 sm:text-3xl dark:text-dm-heading">
    {personal ? 'Prospective Students' : 'Join Our Lab'}
  </h1>
  <p class="mb-8 max-w-2xl text-sm text-surface-500 dark:text-dm-muted">
    {
      personal
        ? "Interested in working with me? I'm always looking for talented and motivated students and collaborators."
        : "We're always looking for talented and motivated researchers to join our team."
    }
  </p>

  <!-- Lab Culture -->
  <section class="mb-10">
    <h2
      class="mb-4 border-b border-surface-200 pb-2 font-serif text-lg font-normal text-surface-900 dark:border-dm-border dark:text-dm-heading"
    >
      {personal ? 'Working With Me' : 'Our Culture'}
    </h2>
    <div class="grid gap-6 sm:grid-cols-3">
      {
        [
          {
            title: 'Rigorous Research',
            desc: 'We pursue high-impact research with scientific rigor and intellectual honesty.',
          },
          {
            title: 'Collaborative Spirit',
            desc: 'We believe the best research comes from diverse perspectives and open collaboration.',
          },
          {
            title: 'Growth & Mentorship',
            desc: 'We invest in the development of every team member through mentorship and support.',
          },
        ].map((item) => (
          <div>
            <h3 class="mb-1 text-sm font-medium text-surface-900 dark:text-dm-heading">{item.title}</h3>
            <p class="text-sm text-surface-500 dark:text-dm-muted">{item.desc}</p>
          </div>
        ))
      }
    </div>
  </section>

  <!-- Open Positions Link -->
  <section class="mb-10">
    <h2
      class="mb-4 border-b border-surface-200 pb-2 font-serif text-lg font-normal text-surface-900 dark:border-dm-border dark:text-dm-heading"
    >
      Open Positions
    </h2>
    <p class="mb-3 text-sm text-surface-600 dark:text-dm-muted">
      {
        personal
          ? 'I have several open positions for students and researchers at various levels.'
          : 'We have several open positions for researchers at various levels.'
      }
    </p>
    <a
      href="/positions"
      class="inline-flex items-center gap-1 text-sm font-medium text-primary-600 hover:underline dark:text-accent-400"
    >
      View all positions and apply
      <span aria-hidden="true">&rarr;</span>
    </a>
  </section>

  <!-- How to Apply -->
  <section>
    <h2
      class="mb-4 border-b border-surface-200 pb-2 font-serif text-lg font-normal text-surface-900 dark:border-dm-border dark:text-dm-heading"
    >
      How to Apply
    </h2>
    <p class="mb-3 text-sm text-surface-600 dark:text-dm-muted">
      {personal ? 'To apply, please visit the' : 'To apply for a position in our lab, please visit the'}{' '}
      <a href="/positions" class="text-primary-600 hover:underline dark:text-accent-400">positions page</a>{' '}
      and use the application form on the relevant position, or send the following materials to{' '}
      <ObfuscatedEmail email={config.socials.email!} class="text-primary-600 hover:underline dark:text-accent-400" />:
    </p>
    <ol class="mb-4 list-inside list-decimal space-y-1.5 text-sm text-surface-500 dark:text-dm-muted">
      <li>Your CV/resume</li>
      <li>A brief statement of research interests (1-2 paragraphs)</li>
      <li>Relevant publications or writing samples (if available)</li>
      <li>Names and contact information for 2-3 references</li>
    </ol>
    <p class="text-xs text-surface-400 dark:text-dm-faint">
      Please use the subject line: <code class="rounded bg-surface-100 px-1.5 py-0.5 font-mono text-xs dark:bg-dm-alt"
        >[Position Type] Application - Your Name</code
      >
    </p>
  </section>
</PageLayout>

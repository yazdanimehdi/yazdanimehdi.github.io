---
interface Heading {
  depth: number;
  slug: string;
  text: string;
}

interface Props {
  headings: Heading[];
}

const { headings } = Astro.props;
const filteredHeadings = headings.filter((h) => h.depth >= 2 && h.depth <= 3);
---

{
  filteredHeadings.length > 0 && (
    <nav class="sticky top-20 text-sm" aria-label="Table of contents">
      <h2 class="mb-2 text-xs font-medium tracking-wider text-surface-400 uppercase dark:text-dm-faint">Contents</h2>
      <ul class="space-y-1 border-s border-surface-200 dark:border-dm-border">
        {filteredHeadings.map((heading) => (
          <li>
            <a
              href={`#${heading.slug}`}
              class:list={[
                '-ms-px block border-s-2 border-transparent py-0.5 text-surface-500 transition-colors hover:border-primary-600 hover:text-primary-600 dark:text-dm-muted dark:hover:border-accent-400 dark:hover:text-accent-400',
                heading.depth === 2 ? 'ps-3' : 'ps-5',
              ]}
            >
              {heading.text}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  )
}
